## 1 需求说明


### 1.1 需求背景

工作已经快两年了，自己已经成为了半个技术人了。有很多很多东西想要想要整理一下分享出来，并不是期待能有多少人关注自己，而是希望自己有一天能够回忆起自己对于这份工作的热爱，不止是money。

另一方面，在大厂拧螺丝几乎让自己没有任何机会从头到尾搭建一个完善的工程，作为一个普通的后端工程师，在一个庞大的企业架构里，只能负责一小部分。这一次，也是为了自己能够从想要搭建一个自己的博客开始，能够实践一些最前沿的技术，例如Java23、SpringBoot3、Vue3等。


### 1.2 需求目标

搭建一套前后端分离的博客系统。

为了能够全面掌控自己的数据，自己的笔记都是一Markdown形式存在的，通过github进行托管。由于各种各样的笔记软件数据安全性存在问题、无法提供长久的支持，很可能过几天就倒闭了，而且其对书写方式的要求也各种各样，并能满足自己的爱好。所以选择了这种最朴素数据记录方式，如果有任何展示的需求，就可以基于Markdown的语法转换、渲染成各种自己喜欢的格式。



### 1.3 技术选型

当前主要有两套技术方案，一种是纯前端的静态博客，其主要有以下部分组成。
* 内容数据：博客内容，可以使Markdown或者其他内容撰写的文章，是展示的核心内容，一般以文件的方式存储在硬盘上。
* 元数据：描述内容的数据，方便用来管理和显示。例如目录和标签，如果是新添加的博客可以按照不同博客的元数据系统展示博客内容。但如果是旧的文章迁移到新的博客系统中，就需要通过特定的脚本或者人工补充的方式将元数据添加到博客系统当中。
* 主题框架：展示内容的模板。模板规定了前端的风格，包括展示的格式、布局等，是不同博客系统核心的最大差异的部分。
* 渲染工具：将内容数据、元数据、主题框架结合起来生成前端脚本。往往是一个一次性运行的脚本，其生成的结果一般是纯静态的前端工程，可以直接在网页上显示。

其代表的工具主要有Hexo、vuepress等。

另一种是前后端分离的博客系统，其主要有以下部分组成。
* 内容数据：博客内容。可以使各种格式，一般内容会与元数据都存储在数据库中，方便检索和管理。
* 后端模块：基于数据库实现内容的增删改查，启动服务器提供Rest接口。
* 前端模块：通过Rest接口访问后端获取数据，在前端获取数据。或者直接获取后端渲染好的数据进行展示。

每个语言都有其代表的前端工具和后端工具。后端工具主要包括：java-springboot、nodejs-express、go-gin、python-django等。前端主要包括页面模板（adminlte、antd、element）和数据渲染工具（vue、react）


纯静态博客与有后端的博客最大的不同就是渲染的时机。纯静态博客的渲染是在部署的时候完成渲染，生成可以直接通过路径访问的完整的HTML页面，一般可以托管在githubpages这样的无后端系统中，最大的弊端是无法在运行是动态修改数据，只能通过重试部署的方式在Server再次渲染（或者增量渲染），但由于所有页面都是生成好的，其加载速度也非常快。有后端的博客系统可以在用户请求的时候，采取传统MVC方式在后端完成动态的渲染，生成HTML页面返回给前端，也可以采取前后端的分离的方案，后端值负责维护数据，在ClientSide完成页面的渲染，有后端的系统也会更加灵活，用户可以与博客系统进行数据交互，例如实现聊天室、评论功能等。


综合以上的调研结果，主要选择当前最先进的技术体系，一方面为了分享，另一方面为了实践，选择上主要贴合自己的技术栈。

后端
- 数据库：MySQL
- Web框架：Java23 + SpringBoot3
- 数据管理：vscode + GitHub + Markdown

前端
- Vue + Element + AdminLTE


### 1.4 需求分析
主要的模块可以分为一下模块。
不需要多用户管理。只需要生成的静态用户信息。可以放一个JSON配置文件，系统的启动的时候去加载。

文章同步功能P0：文章的编辑通过vscode/markdown/github三件套实现，不需要博客系统本身具有撰写文章的能力，只需要能根据原始数据生成文章的数据。
* 设置自动同步和定时扫描任务，从原始数据扫描文章，加载到MySQL数据库中，能够自动对比文章的不同，实现增量数据的处理，能够清理已经过期的文章。


文章管理功能P0.博客系统的核心功能，用来组织文章相关的数据，实现文章列表、详情的展示、文章元数据的展示、文章不同方式的索引。
* 查询搜索功能：基于多个条件索引文章，创建时间、修改时间、目录、标签、文章内容关键字、是否隐藏进行动态查询分页。
* 查看详情功能：显示文章的详情页内容、统计数据等。
* 分类管理功能：以列表的形式展示文章的目录。
* 标签管理功能：能够自动生成文章的标签。能够以标签云的形式展示文章的标签。
* 数据统计功能。博客系统内部，业务相关的统计数据。每篇文章的浏览量、博客系统的访问量等。


文章评论功能P1
* 创建评论功能：能够回复文章或指定的评论。
* 删除评论功能：同一个用户可以删除自己评论。
* 博客留言功能：用户可以在留言板上留言。


用户管理功能P1，前端需要对某些管理员的功能进行隐藏和展示，后端需要对管理员的功能进行进行鉴权。
* 用户登录功能。任何人访问博客都可以建立真实账户或者匿名用户，用于留言板和系统评论功能。
* 权限校验功能。设置不同的API和对应的权限。管理员账户需要一些魔法和特殊能力。例如查看文章
* 个人资料管理。自动生成匿名用户并且能够识别是否是同一个匿名用户访问、添加关联邮箱、繁琐创建完整用户。用户可以创建、编辑和管理自己的个人资料，包括头像、昵称、密码等。


后台管理功能P2。实现对文章元数据的修改。
* 文章隐藏功能。能够查看隐藏文章，并设置文章隐藏功能，对质量较低、还没有完善的草稿进行隐藏。（管理员）
* 文章置顶功能。能够显示置顶的文章。能够置顶一篇文章（管理员）。
* 系统监控功能。后台数据分析功能

自动部署能力P2。
* 系统部署：工程打包成docker镜像，方便系统快速迁移。
* 数据变更：通过github触发自动部署流水线。


